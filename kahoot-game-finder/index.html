<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kahoot Scanner Console</title>
  <style>
    body {
      background: black;
      color: lime;
      font-family: monospace;
      margin: 0;
      padding: 0;
    }
    #console {
      padding: 10px;
      height: 100vh;
      overflow-y: auto;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div id="console"></div>

  <script>
    const consoleEl = document.getElementById("console");

    function appendLine(text) {
      consoleEl.textContent += text + "\n";
      consoleEl.scrollTop = consoleEl.scrollHeight; // auto-scroll
    }

    async function pollStatus() {
      try {
        const res = await fetch("/status");
        const data = await res.json();

        // Print any new codes
        data.new_codes.forEach(code => {
          appendLine("ðŸŽ¯ GAME PIN: " + code);
        });

        // Print counters every 50 codes checked
        if (data.codes_checked % 50 === 0) {
          appendLine(`Checked ${data.codes_checked} codes | Active: ${data.codes_found.length} | Skipped old: ${data.codes_skipped.old} | No session: ${data.codes_skipped.no_session} | Locked: ${data.codes_skipped.locked} | Other: ${data.codes_skipped.other}`);
        }

      } catch (err) {
        appendLine("Error fetching status: " + err);
      }
    }

    // Poll every 0.5 seconds
    setInterval(pollStatus, 500);
  </script>
</body>
</html>
